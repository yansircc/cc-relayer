import{d as K,b as Q,a as v,f as m,s as c,e as V}from"../chunks/Ce1JsnIe.js";import{a1 as W,a6 as b,a7 as X,a8 as o,a9 as n,aa as s,g as e,a2 as u,s as t,ab as Y}from"../chunks/BLL442xA.js";import{i as y}from"../chunks/BBj9_ryw.js";import{s as Z,r as ee}from"../chunks/BXgLrMXN.js";import{b as ae}from"../chunks/C1SpsZ0d.js";import{a as A}from"../chunks/0xq203u2.js";const te=!1,ve=Object.freeze(Object.defineProperty({__proto__:null,ssr:te},Symbol.toStringTag,{value:"Module"}));var re=m('<p class="error-msg"> </p>'),oe=m(`<pre style="background:#f4f4f4;padding:8px 10px;margin:8px 0;font-size:12px;overflow-x:auto;white-space:pre-wrap;word-break:break-all">session_id: <b> </b>  (expires in 10m)

auth url:
<a target="_blank" rel="noopener"> </a>

Open this URL in your browser, login and authorize.</pre>`),ne=m('<p class="error-msg"> </p>'),se=m('<pre style="background:#f4f4f4;padding:8px 10px;margin:8px 0;font-size:12px;overflow-x:auto"> </pre>'),ie=m('<div style="margin:8px 0;padding:6px 0"><span style="font-weight:bold;margin-right:4px">2.</span> After authorization, paste the callback URL or code <form><label for="callback-url">callback url or code</label> <input id="callback-url" type="text" placeholder="https://platform.claude.com/oauth/code/callback?code=..."/> <div class="hint">email and org info are auto-fetched after token exchange</div> <button type="submit"> </button></form> <!> <!></div>'),le=m('<fieldset><legend>add account (browser oauth)</legend> <div style="margin:8px 0;padding:6px 0"><span style="font-weight:bold;margin-right:4px">1.</span> Generate authorization URL <br/> <button> </button> <!> <!></div> <!></fieldset>');function be(E,J){W(J,!0);let f=u(""),h=u(""),k=u(!1),w=u(""),g=u(""),O=u(""),S=u(!1),z=u("");async function N(){t(k,!0),t(w,""),t(f,""),t(h,"");try{const a=await A("/accounts/generate-auth-url",{method:"POST"});t(h,a.session_id,!0),t(f,a.auth_url,!0)}catch(a){t(w,a.message,!0)}finally{t(k,!1)}}async function C(a){if(a.preventDefault(),!(!e(g).trim()||!e(h))){t(S,!0),t(z,""),t(O,"");try{const r=await A("/accounts/exchange-code",{method:"POST",body:JSON.stringify({session_id:e(h),callback_url:e(g).trim()})});t(O,JSON.stringify(r,null,2),!0),t(g,"")}catch(r){t(z,r.message,!0)}finally{t(S,!1)}}}var U=le(),L=o(n(U),2),_=o(n(L),4),D=n(_,!0);s(_);var T=o(_,2);{var G=a=>{var r=re(),l=n(r,!0);s(r),b(()=>c(l,e(w))),v(a,r)};y(T,a=>{e(w)&&a(G)})}var I=o(T,2);{var M=a=>{var r=oe(),l=o(n(r)),x=n(l,!0);s(l);var d=o(l,2),R=n(d,!0);s(d),Y(),s(r),b(()=>{c(x,e(h)),Z(d,"href",e(f)),c(R,e(f))}),v(a,r)};y(I,a=>{e(f)&&a(M)})}s(L);var $=o(L,2);{var q=a=>{var r=ie(),l=o(n(r),2),x=o(n(l),2);ee(x);var d=o(x,4),R=n(d,!0);s(d),s(l);var j=o(l,2);{var B=i=>{var p=ne(),P=n(p,!0);s(p),b(()=>c(P,e(z))),v(i,p)};y(j,i=>{e(z)&&i(B)})}var F=o(j,2);{var H=i=>{var p=se(),P=n(p,!0);s(p),b(()=>c(P,e(O))),v(i,p)};y(F,i=>{e(O)&&i(H)})}s(r),b(i=>{d.disabled=i,c(R,e(S)?"exchanging...":"exchange code")},[()=>e(S)||!e(g).trim()]),V("submit",l,C),ae(x,()=>e(g),i=>t(g,i)),v(a,r)};y($,a=>{e(f)&&a(q)})}s(U),b(()=>{_.disabled=e(k),c(D,e(k)?"generating...":"generate auth url")}),Q("click",_,N),v(E,U),X()}K(["click"]);export{be as component,ve as universal};
