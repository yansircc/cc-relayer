import{e as j,a as _,s as h,f as k}from"../chunks/Ce1JsnIe.js";import{a8 as s,a5 as T,a6 as y,g as a,a9 as l,a2 as c,aa as f,s as r}from"../chunks/BLL442xA.js";import{i as $}from"../chunks/BBj9_ryw.js";import{r as L}from"../chunks/BXgLrMXN.js";import{b as N}from"../chunks/C1SpsZ0d.js";import{b as P}from"../chunks/BE41A0-c.js";const z=!1,F=Object.freeze(Object.defineProperty({__proto__:null,ssr:z},Symbol.toStringTag,{value:"Module"}));var C=k('<p class="error-msg"> </p>'),D=k('<h2>admin login</h2> <form><fieldset><legend>authenticate</legend> <label for="admin-token">admin token</label> <input id="admin-token" type="password" placeholder="enter admin token..."/> <!> <br/> <button type="submit"> </button></fieldset></form>',1);function G(w){let o=c(""),n=c(""),i=c(!1);async function x(e){if(e.preventDefault(),!!a(o).trim()){r(i,!0),r(n,"");try{const t=await fetch("/admin/login",{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:a(o).trim()})});if(!t.ok){const u=await t.text();r(n,u||`Login failed (${t.status})`,!0);return}window.location.href=`${P}/dashboard`}catch{r(n,"Network error")}finally{r(i,!1)}}}var g=D(),m=s(T(g),2),b=l(m),d=s(l(b),4);L(d);var v=s(d,2);{var O=e=>{var t=C(),u=l(t,!0);f(t),y(()=>h(u,a(n))),_(e,t)};$(v,e=>{a(n)&&e(O)})}var p=s(v,4),S=l(p,!0);f(p),f(b),f(m),y(e=>{p.disabled=e,h(S,a(i)?"logging in...":"login")},[()=>a(i)||!a(o).trim()]),j("submit",m,x),N(d,()=>a(o),e=>r(o,e)),_(w,g)}export{G as component,F as universal};
