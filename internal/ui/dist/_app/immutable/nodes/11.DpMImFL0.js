import{d as pa,c as ha,a as c,s as o,b as ft,f as l,t as fa}from"../chunks/Ce1JsnIe.js";import{a1 as ma,a4 as ba,s as X,a5 as mt,a7 as ga,a2 as Z,g as t,a9 as e,aa as a,a8 as r,a6 as g,ab as Mt,ac as tt}from"../chunks/BLL442xA.js";import{i as F}from"../chunks/BBj9_ryw.js";import{e as j,i as A}from"../chunks/CrcuVASb.js";import{s as Ot}from"../chunks/BXgLrMXN.js";import{c as at,s as et}from"../chunks/CQtkrdUT.js";import{s as xa,a as ka}from"../chunks/Dh3P-UHa.js";import{p as ya}from"../chunks/CtzWjIl6.js";import{g as Ta}from"../chunks/BasH8Q2U.js";import{b as bt}from"../chunks/BE41A0-c.js";import{a as rt}from"../chunks/0xq203u2.js";import{a as qa,t as wa,s as Da,f as h}from"../chunks/C5Uh6Ygl.js";const $a=!1,se=Object.freeze(Object.defineProperty({__proto__:null,ssr:$a},Symbol.toStringTag,{value:"Module"}));var Ca=l('<p class="error-msg"> </p> <p><a>&larr; back to users</a></p>',1),Sa=l('<p class="loading">loading user...</p>'),Ma=l('<div style="background:#f4f4f4;padding:4px 8px;font-size:12px;margin:6px 0">token: <b> </b> <br/><br/> <span class="r">Copy now -- this token will not be shown again.</span> <br/> Configure Claude Code: <br/> </div>'),Oa=l('<span class="muted">-</span>'),ja=l('<p class="muted">no usage data</p>'),Aa=l("<th> </th>"),Pa=l('<td class="num"> </td>'),Ea=l('<td class="num"> </td>'),Ia=l('<td class="num"> </td>'),Ra=l('<td class="num"> </td>'),za=l('<table><thead><tr><th></th><!><th>total</th></tr></thead><tbody><tr><td>requests</td><!><td class="num"><b> </b></td></tr><tr><td>input tokens</td><!><td class="num"><b> </b></td></tr><tr><td>output tokens</td><!><td class="num"><b> </b></td></tr><tr><td>cache read</td><!><td class="num"><b> </b></td></tr></tbody></table>'),Ba=l('<p class="muted">no model data</p>'),La=l('<tr><td> </td><td class="num"> </td><td class="num"> </td><td class="num"> </td><td class="num"> </td><td class="ascii-bar"> </td></tr>'),Na=l("<table><thead><tr><th>model</th><th>reqs</th><th>input</th><th>output</th><th>cache read</th><th></th></tr></thead><tbody></tbody></table>"),Wa=l('<p class="muted">no recent requests</p>'),Fa=l('<tr><td class="muted"> </td><td> </td><td class="num"> </td><td class="num"> </td><td class="num"> </td><td> </td><td> </td><td class="num"> </td></tr>'),Ga=l("<table><thead><tr><th>time</th><th>model</th><th>input</th><th>output</th><th>cache r/w</th><th>account</th><th>status</th><th>duration</th></tr></thead><tbody></tbody></table>"),Ua=l('<h2> <span> </span></h2> <div class="actions"><a href="javascript:void(0)">[regenerate token]</a> <a href="javascript:void(0)"> </a> <a href="javascript:void(0)" class="r">[delete]</a></div> <!> <dl><dt>id</dt> <dd class="muted"> </dd> <dt>name</dt> <dd> </dd> <dt>token prefix</dt> <dd> <span class="muted">(full token not stored)</span></dd> <dt>status</dt> <dd><span> </span></dd> <dt>created</dt> <dd> </dd> <dt>last active</dt> <dd><!></dd></dl> <h2>usage (7 days)</h2> <!> <h2>by model (7 days)</h2> <!> <h2>recent requests</h2> <!> <p style="margin-top:16px;font-size:12px"><a>&larr; back to users</a></p>',1);function de(jt,At){ma(At,!0);const Pt=()=>xa(ya,"$page",Et),[Et,It]=ka();let n=Z(null),st=Z(""),gt=Z(!0),H=Z("");ba(()=>{Rt()});async function Rt(){try{X(n,await rt("/users/"+Pt().params.id),!0)}catch(s){X(st,s.message,!0)}finally{X(gt,!1)}}function xt(s){return s==="active"?"tag tag-active":s==="disabled"?"tag tag-disabled":"tag"}function J(s,v){return s.reduce((x,P)=>x+P[v],0)}function zt(s){return Math.max(1,...s.map(v=>v.request_count))}function Bt(s,v){if(v<=0||s<=0)return"";const x=Math.max(1,Math.round(s/v*20));return"█".repeat(x)}function Lt(s){return s.replace("claude-","").replace(/-\d{8}$/,"")}function Nt(s){return s==="ok"||s==="200"?"g":s.startsWith("4")||s==="error"?"r":s.startsWith("retry")||s.startsWith("5")||s==="529"?"o":""}async function Wt(){if(t(n)&&confirm(`Regenerate token for ${t(n).name}?`))try{const s=await rt(`/users/${t(n).id}/regenerate`,{method:"POST"});X(H,s.token,!0)}catch(s){alert(s.message)}}async function Ft(){if(!t(n))return;const s=t(n).status==="active"?"disabled":"active";try{await rt(`/users/${t(n).id}/status`,{method:"POST",body:JSON.stringify({status:s})}),t(n).status=s}catch(v){alert(v.message)}}async function Gt(){if(t(n)&&confirm(`Delete user ${t(n).name}?`))try{await rt(`/users/${t(n).id}`,{method:"DELETE"}),Ta(`${bt}/users`)}catch(s){alert(s.message)}}var kt=ha(),Ut=mt(kt);{var Ht=s=>{var v=Ca(),x=mt(v),P=e(x,!0);a(x);var K=r(x,2),Y=e(K);a(K),g(()=>{o(P,t(st)),Ot(Y,"href",`${bt??""}/users`)}),c(s,v)},Jt=s=>{var v=Sa();c(s,v)},Kt=s=>{const v=tt(()=>t(n).daily_usage??[]),x=tt(()=>t(n).model_usage??[]),P=tt(()=>t(n).recent_requests??[]),K=tt(()=>zt(t(x)));var Y=Ua(),dt=mt(Y),yt=e(dt),ot=r(yt),Yt=e(ot,!0);a(ot),a(dt);var nt=r(dt,2),Tt=e(nt),G=r(Tt,2),Qt=e(G);a(G);var Vt=r(G,2);a(nt);var qt=r(nt,2);{var Xt=d=>{var u=Ma(),p=r(e(u)),y=e(p,!0);a(p);var i=r(p,10);a(u),g(()=>{o(y,t(H)),o(i,`   export ANTHROPIC_API_KEY=${t(H)??""}`)}),c(d,u)};F(qt,d=>{t(H)&&d(Xt)})}var ut=r(qt,2),vt=r(e(ut),2),Zt=e(vt,!0);a(vt);var _t=r(vt,4),ta=e(_t,!0);a(_t);var it=r(_t,4),aa=e(it);Mt(),a(it);var ct=r(it,4),lt=e(ct),ea=e(lt,!0);a(lt),a(ct);var pt=r(ct,4),ra=e(pt,!0);a(pt);var wt=r(pt,4),sa=e(wt);{var da=d=>{var u=fa();g((p,y)=>o(u,`${p??""} (${y??""})`),[()=>wa(t(n).last_active_at),()=>new Date(t(n).last_active_at).toLocaleTimeString("en-GB",{hour12:!1})]),c(d,u)},oa=d=>{var u=Oa();c(d,u)};F(sa,d=>{t(n).last_active_at?d(da):d(oa,!1)})}a(wt),a(ut);var Dt=r(ut,4);{var na=d=>{var u=ja();c(d,u)},ua=d=>{var u=za(),p=e(u),y=e(p),i=r(e(y));j(i,17,()=>t(v),A,(f,m)=>{var _=Aa(),b=e(_,!0);a(_),g(M=>o(b,M),[()=>Da(t(m).key)]),c(f,_)}),Mt(),a(y),a(p);var T=r(p),k=e(T),E=r(e(k));j(E,17,()=>t(v),A,(f,m)=>{var _=Pa(),b=e(_,!0);a(_),g(M=>o(b,M),[()=>h(t(m).request_count)]),c(f,_)});var q=r(E),I=e(q),C=e(I,!0);a(I),a(q),a(k);var O=r(k),w=r(e(O));j(w,17,()=>t(v),A,(f,m)=>{var _=Ea(),b=e(_,!0);a(_),g(M=>o(b,M),[()=>h(t(m).input_tokens)]),c(f,_)});var R=r(w),D=e(R),U=e(D,!0);a(D),a(R),a(O);var $=r(O),z=r(e($));j(z,17,()=>t(v),A,(f,m)=>{var _=Ia(),b=e(_,!0);a(_),g(M=>o(b,M),[()=>h(t(m).output_tokens)]),c(f,_)});var S=r(z),B=e(S),L=e(B,!0);a(B),a(S),a($);var N=r($),W=r(e(N));j(W,17,()=>t(v),A,(f,m)=>{var _=Ra(),b=e(_,!0);a(_),g(M=>o(b,M),[()=>h(t(m).cache_read_tokens)]),c(f,_)});var Q=r(W),V=e(Q),ht=e(V,!0);a(V),a(Q),a(N),a(T),a(u),g((f,m,_,b)=>{o(C,f),o(U,m),o(L,_),o(ht,b)},[()=>h(J(t(v),"request_count")),()=>h(J(t(v),"input_tokens")),()=>h(J(t(v),"output_tokens")),()=>h(J(t(v),"cache_read_tokens"))]),c(d,u)};F(Dt,d=>{t(v).length===0?d(na):d(ua,!1)})}var $t=r(Dt,4);{var va=d=>{var u=Ba();c(d,u)},_a=d=>{var u=Na(),p=r(e(u));j(p,21,()=>t(x),A,(y,i)=>{var T=La(),k=e(T),E=e(k,!0);a(k);var q=r(k),I=e(q,!0);a(q);var C=r(q),O=e(C,!0);a(C);var w=r(C),R=e(w,!0);a(w);var D=r(w),U=e(D,!0);a(D);var $=r(D),z=e($,!0);a($),a(T),g((S,B,L,N,W)=>{o(E,t(i).key),o(I,S),o(O,B),o(R,L),o(U,N),o(z,W)},[()=>h(t(i).request_count),()=>h(t(i).input_tokens),()=>h(t(i).output_tokens),()=>h(t(i).cache_read_tokens),()=>Bt(t(i).request_count,t(K))]),c(y,T)}),a(p),a(u),c(d,u)};F($t,d=>{t(x).length===0?d(va):d(_a,!1)})}var Ct=r($t,4);{var ia=d=>{var u=Wa();c(d,u)},ca=d=>{var u=Ga(),p=r(e(u));j(p,21,()=>t(P),A,(y,i)=>{var T=Fa(),k=e(T),E=e(k,!0);a(k);var q=r(k),I=e(q,!0);a(q);var C=r(q),O=e(C,!0);a(C);var w=r(C),R=e(w,!0);a(w);var D=r(w),U=e(D);a(D);var $=r(D),z=e($,!0);a($);var S=r($),B=e(S,!0);a(S);var L=r(S),N=e(L,!0);a(L),a(T),g((W,Q,V,ht,f,m,_,b)=>{o(E,W),o(I,Q),o(O,V),o(R,ht),o(U,`${f??""} / ${m??""}`),o(z,t(i).AccountID),et(S,1,_),o(B,t(i).Status),o(N,b)},[()=>new Date(t(i).CreatedAt).toLocaleTimeString("en-GB",{hour12:!1}),()=>Lt(t(i).Model),()=>h(t(i).InputTokens),()=>h(t(i).OutputTokens),()=>h(t(i).CacheReadTokens),()=>h(t(i).CacheCreateTokens),()=>at(Nt(t(i).Status)),()=>t(i).DurationMs>0?(t(i).DurationMs/1e3).toFixed(1)+"s":"-"]),c(y,T)}),a(p),a(u),c(d,u)};F(Ct,d=>{t(P).length===0?d(ia):d(ca,!1)})}var St=r(Ct,2),la=e(St);a(St),g((d,u,p)=>{o(yt,`${t(n).name??""} `),et(ot,1,d),o(Yt,t(n).status),et(G,1,at(t(n).status==="active"?"r":"g")),o(Qt,`[${t(n).status==="active"?"disable":"enable"}]`),o(Zt,t(n).id),o(ta,t(n).name),o(aa,`${t(n).token_prefix??""} `),et(lt,1,u),o(ea,t(n).status),o(ra,p),Ot(la,"href",`${bt??""}/users`)},[()=>at(xt(t(n).status)),()=>at(xt(t(n).status)),()=>qa(t(n).created_at)]),ft("click",Tt,d=>{d.preventDefault(),Wt()}),ft("click",G,d=>{d.preventDefault(),Ft()}),ft("click",Vt,d=>{d.preventDefault(),Gt()}),c(s,Y)};F(Ut,s=>{t(st)?s(Ht):t(gt)?s(Jt,1):t(n)&&s(Kt,2)})}c(jt,kt),ga(),It()}pa(["click"]);export{de as component,se as universal};
