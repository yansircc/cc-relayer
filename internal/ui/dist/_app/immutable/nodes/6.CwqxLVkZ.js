import{a as _,f as y}from"../chunks/DSgr-hxR.js";import{d as s,f as S,j as h,g as r,e as l,i as f,k as a,s as c}from"../chunks/lUnH5NgY.js";import{e as T,s as k}from"../chunks/CMUPHsw8.js";import{i as $}from"../chunks/ChPJZGYw.js";import{r as L}from"../chunks/DUKUYMvf.js";import{b as N}from"../chunks/CId_XQ1p.js";import{b as P}from"../chunks/BHL02ULs.js";const z=!1,G=Object.freeze(Object.defineProperty({__proto__:null,ssr:z},Symbol.toStringTag,{value:"Module"}));var C=y('<p class="error-msg"> </p>'),D=y('<h2>admin login</h2> <form><fieldset><legend>authenticate</legend> <label for="admin-token">admin token</label> <input id="admin-token" type="password" placeholder="enter admin token..."/> <!> <br/> <button type="submit"> </button></fieldset></form>',1);function H(w){let o=c(""),i=c(""),n=c(!1);async function x(e){if(e.preventDefault(),!!r(o).trim()){a(n,!0),a(i,"");try{const t=await fetch("/admin/login",{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:r(o).trim()})});if(!t.ok){const u=await t.text();a(i,u||`Login failed (${t.status})`,!0);return}window.location.href=`${P}/dashboard`}catch{a(i,"Network error")}finally{a(n,!1)}}}var g=D(),m=s(S(g),2),b=l(m),d=s(l(b),4);L(d);var v=s(d,2);{var j=e=>{var t=C(),u=l(t,!0);f(t),h(()=>k(u,r(i))),_(e,t)};$(v,e=>{r(i)&&e(j)})}var p=s(v,4),O=l(p,!0);f(p),f(b),f(m),h(e=>{p.disabled=e,k(O,r(n)?"logging in...":"login")},[()=>r(n)||!r(o).trim()]),T("submit",m,x),N(d,()=>r(o),e=>a(o,e)),_(w,g)}export{H as component,G as universal};
