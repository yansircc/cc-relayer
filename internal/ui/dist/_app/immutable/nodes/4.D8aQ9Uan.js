import{a as c,f as u}from"../chunks/DSgr-hxR.js";import{a as ta,d as r,f as I,j as h,b as sa,e as s,g as a,i as o,s as p,a9 as oa,k as l}from"../chunks/lUnH5NgY.js";import{d as na,s as d,a as F}from"../chunks/CMUPHsw8.js";import{i as g}from"../chunks/ChPJZGYw.js";import{s as M,r as la}from"../chunks/DUKUYMvf.js";import{b as ia}from"../chunks/CId_XQ1p.js";import{b as G}from"../chunks/NZDo04p-.js";import{a as H}from"../chunks/DtH33QRI.js";const ca=!1,ja=Object.freeze(Object.defineProperty({__proto__:null,ssr:ca},Symbol.toStringTag,{value:"Module"}));var ua=u('<span class="g">&#10003;</span>'),va=u('<p class="error-msg"> </p>'),pa=u('<p class="hint">generate an OAuth URL, open it in browser, login and authorize.</p> <button class="link"> </button> <!>',1),da=u('<div class="bar">session: <b> </b> <span class="muted">(expires in 10m)</span> <br/><br/> auth url:<br/> <a target="_blank" class="auth-url"> </a> <br/><br/> <span class="muted">open this URL, login and authorize. then paste the callback below.</span></div>'),ba=u('<span class="g">&#10003;</span>'),_a=u('<p class="error-msg"> </p>'),fa=u('<label for="callback-input">callback url or code</label> <input id="callback-input" type="text" placeholder="https://platform.claude.com/oauth/code/callback?code=..."/> <p class="hint">email and org info are auto-fetched after token exchange.</p> <!> <button class="link"> </button>',1),ha=u('<div class="bar"><span class="g">&#10003; account created</span> <br/><br/> email: <b> </b><br/> status: <b class="g"> </b><br/> <br/> <a>view account &rarr;</a></div>'),ga=u("<h2>exchange code <!></h2> <!>",1),ma=u('<h2>add account</h2> <h2>authorize <!></h2> <!> <!> <p style="margin-top:16px;font-size:12px"><a>&larr; back</a></p>',1);function Pa(K,Q){ta(Q,!0);let j=p(!1),P=p(!1),m=p(""),L=p(""),y=p(""),T=p(""),A=p(""),x=p(null);async function V(){l(j,!0),l(T,"");try{const e=await H("/accounts/generate-auth-url",{method:"POST"});l(m,e.session_id,!0),l(L,e.auth_url,!0)}catch(e){l(T,e.message,!0)}finally{l(j,!1)}}async function W(){if(a(y).trim()){l(P,!0),l(A,"");try{const e=await H("/accounts/exchange-code",{method:"POST",body:JSON.stringify({session_id:a(m),callback_url:a(y).trim()})});l(x,e,!0)}catch(e){l(A,e.message,!0)}finally{l(P,!1)}}}var N=ma(),R=r(I(N),2),X=r(s(R));{var Y=e=>{var i=ua();c(e,i)};g(X,e=>{a(m)&&e(Y)})}o(R);var q=r(R,2);{var Z=e=>{var i=pa(),t=r(I(i),2),O=s(t,!0);o(t);var b=r(t,2);{var w=z=>{var S=va(),n=s(S,!0);o(S),h(()=>d(n,a(T))),c(z,S)};g(b,z=>{a(T)&&z(w)})}h(()=>{t.disabled=a(j),d(O,a(j)?"[generating...]":"[generate auth url]")}),F("click",t,V),c(e,i)},$=e=>{var i=da(),t=r(s(i)),O=s(t,!0);o(t);var b=r(t,9),w=s(b,!0);o(b),oa(5),o(i),h(()=>{d(O,a(m)),M(b,"href",a(L)),d(w,a(L))}),c(e,i)};g(q,e=>{a(m)?e($,!1):e(Z)})}var B=r(q,2);{var aa=e=>{var i=ga(),t=I(i),O=r(s(t));{var b=n=>{var v=ba();c(n,v)};g(O,n=>{a(x)&&n(b)})}o(t);var w=r(t,2);{var z=n=>{var v=fa(),_=r(I(v),2);la(_);var E=r(_,4);{var U=f=>{var J=_a(),ra=s(J,!0);o(J),h(()=>d(ra,a(A))),c(f,J)};g(E,f=>{a(A)&&f(U)})}var k=r(E,2),C=s(k,!0);o(k),h(f=>{k.disabled=f,d(C,a(P)?"[exchanging...]":"[exchange code]")},[()=>a(P)||!a(y).trim()]),ia(_,()=>a(y),f=>l(y,f)),F("click",k,W),c(n,v)},S=n=>{var v=ha(),_=r(s(v),5),E=s(_,!0);o(_);var U=r(_,3),k=s(U,!0);o(U);var C=r(U,5);o(v),h(()=>{d(E,a(x).email),d(k,a(x).status),M(C,"href",`${G??""}/accounts/${a(x).id??""}`)}),c(n,v)};g(w,n=>{a(x)?n(S,!1):n(z)})}c(e,i)};g(B,e=>{a(m)&&e(aa)})}var D=r(B,2),ea=s(D);o(D),h(()=>M(ea,"href",`${G??""}/dashboard`)),c(K,N),sa()}na(["click"]);export{Pa as component,ja as universal};
