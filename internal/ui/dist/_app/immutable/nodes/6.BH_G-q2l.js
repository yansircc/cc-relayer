import{a as _,f as y}from"../chunks/YPNk2NX5.js";import{e as s,f as S,m as h,g as r,j as l,s as c,k as f,n as a}from"../chunks/ABNvuIHC.js";import{e as T,s as k}from"../chunks/e87nZPu-.js";import{i as $}from"../chunks/CCxA75cu.js";import{r as L}from"../chunks/ct8flr_T.js";import{a as N}from"../chunks/2sA3hMLD.js";import{b as P}from"../chunks/B36JXrSm.js";const z=!1,G=Object.freeze(Object.defineProperty({__proto__:null,ssr:z},Symbol.toStringTag,{value:"Module"}));var C=y('<p class="error-msg"> </p>'),D=y('<h2>admin login</h2> <form><fieldset><legend>authenticate</legend> <label for="admin-token">admin token</label> <input id="admin-token" type="password" placeholder="enter admin token..."/> <!> <br/> <button type="submit"> </button></fieldset></form>',1);function H(w){let o=c(""),n=c(""),i=c(!1);async function x(e){if(e.preventDefault(),!!r(o).trim()){a(i,!0),a(n,"");try{const t=await fetch("/admin/login",{method:"POST",credentials:"same-origin",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:r(o).trim()})});if(!t.ok){const u=await t.text();a(n,u||`Login failed (${t.status})`,!0);return}window.location.href=`${P}/dashboard`}catch{a(n,"Network error")}finally{a(i,!1)}}}var g=D(),m=s(S(g),2),b=l(m),d=s(l(b),4);L(d);var v=s(d,2);{var j=e=>{var t=C(),u=l(t,!0);f(t),h(()=>k(u,r(n))),_(e,t)};$(v,e=>{r(n)&&e(j)})}var p=s(v,4),O=l(p,!0);f(p),f(b),f(m),h(e=>{p.disabled=e,k(O,r(i)?"logging in...":"login")},[()=>r(i)||!r(o).trim()]),T("submit",m,x),N(d,()=>r(o),e=>a(o,e)),_(w,g)}export{H as component,G as universal};
