import{d as V,a as d,f as p,s as c,b as W}from"../chunks/Ce1JsnIe.js";import{a1 as X,a2 as $,a3 as Y,a4 as Z,s as f,a5 as aa,a6 as z,a7 as ta,a8 as n,a9 as r,aa as e,g as t}from"../chunks/BLL442xA.js";import{i as ea}from"../chunks/BBj9_ryw.js";import{e as ra,i as sa}from"../chunks/CrcuVASb.js";import{s as j}from"../chunks/BXgLrMXN.js";import{c as oa,s as ia}from"../chunks/CQtkrdUT.js";import{b as D}from"../chunks/BE41A0-c.js";import{a as T}from"../chunks/0xq203u2.js";const na=!1,xa=Object.freeze(Object.defineProperty({__proto__:null,ssr:na},Symbol.toStringTag,{value:"Module"}));var la=p('<p class="error-msg"> </p>'),da=p('<p class="loading">loading accounts...</p>'),ca=p('<tr><td><a> </a></td><td><span> </span></td><td> </td><td class="actions"><a style="font-size:12px">detail</a> <a href="javascript:void(0)" style="font-size:12px" class="r">delete</a></td></tr>'),pa=p("<table><thead><tr><th>name</th><th>status</th><th>priority</th><th></th></tr></thead><tbody></tbody></table>"),fa=p('<h2>accounts <span class="muted"> </span></h2> <p style="margin-bottom:12px;font-size:12px"><a>[+ add account]</a></p> <!>',1);function ka(C,L){X(L,!0);let l=$(Y([])),v=$(""),E=$(!0);Z(()=>{M()});async function M(){try{f(l,await T("/accounts"),!0)}catch(a){f(v,a.message,!0)}finally{f(E,!1)}}function P(a){return a==="active"?"tag tag-active":a==="blocked"?"tag tag-blocked":a==="overloaded"?"tag tag-overloaded":a==="disabled"?"tag tag-disabled":"tag"}async function q(a,s){if(confirm(`Delete account ${s}?`))try{await T(`/accounts/${a}`,{method:"DELETE"}),f(l,t(l).filter(o=>o.id!==a),!0)}catch(o){alert(o.message)}}var w=fa(),u=aa(w),A=n(r(u)),B=r(A);e(A),e(u);var m=n(u,2),F=r(m);e(m);var G=n(m,2);{var H=a=>{var s=la(),o=r(s,!0);e(s),z(()=>c(o,t(v))),d(a,s)},I=a=>{var s=da();d(a,s)},J=a=>{var s=pa(),o=n(r(s));ra(o,21,()=>t(l),sa,(K,i)=>{var _=ca(),g=r(_),h=r(g),N=r(h,!0);e(h),e(g);var b=n(g),y=r(b),Q=r(y,!0);e(y),e(b);var x=n(b),R=r(x,!0);e(x);var O=n(x),S=r(O),U=n(S,2);e(O),e(_),z(k=>{j(h,"href",`${D??""}/accounts/${t(i).id??""}`),c(N,t(i).name),ia(y,1,k),c(Q,t(i).status),c(R,t(i).priority),j(S,"href",`${D??""}/accounts/${t(i).id??""}`)},[()=>oa(P(t(i).status))]),W("click",U,k=>{k.preventDefault(),q(t(i).id,t(i).name)}),d(K,_)}),e(o),e(s),d(a,s)};ea(G,a=>{t(v)?a(H):t(E)?a(I,1):a(J,!1)})}z(()=>{c(B,`(${t(l).length??""})`),j(F,"href",`${D??""}/add-account`)}),d(C,w),ta()}V(["click"]);export{ka as component,xa as universal};
