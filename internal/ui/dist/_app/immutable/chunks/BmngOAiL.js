function a(u,n){let e=null,t=null,l=!1;function i(){if(l)return;e=new EventSource(u,{withCredentials:!0}),e.onopen=r=>{var c;return(c=n.onOpen)==null?void 0:c.call(n,r)};const o=n.eventTypes;if(o&&o.length>0)for(const r of o)e.addEventListener(r,c=>n.onMessage(c));else e.onmessage=r=>n.onMessage(r);e.onerror=r=>{var c;(c=n.onError)==null||c.call(n,r),e==null||e.close(),l||(t=setTimeout(i,n.reconnectMs??3e3))}}return i(),{close(){l=!0,t&&clearTimeout(t),e==null||e.close()}}}export{a as c};
