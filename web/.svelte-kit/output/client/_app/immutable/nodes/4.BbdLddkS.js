import{a as f,f as _}from"../chunks/Cefu_kJh.js";import{a as Z,d as e,f as aa,j as m,g as t,b as ta,e as s,i as o,k as i,s as l,a9 as ea}from"../chunks/xTExy2GW.js";import{d as ra,a as A,s as c}from"../chunks/C8R120ip.js";import{i as w}from"../chunks/Bbanrw_8.js";import{s as j,r as sa}from"../chunks/Buwlz4xJ.js";import{b as oa}from"../chunks/CKMoCsps.js";import{b as C}from"../chunks/RY6GoAMc.js";import{a as G}from"../chunks/DtH33QRI.js";const ia=!1,xa=Object.freeze(Object.defineProperty({__proto__:null,ssr:ia},Symbol.toStringTag,{value:"Module"}));var na=_('<p class="error-msg"> </p>'),la=_('<div class="bar" style="margin-top:8px">session_id: <b> </b> <span class="muted">(expires in 10m)</span> <br/><br/> auth url:<br/> <a target="_blank" class="auth-url"> </a> <br/><br/> <span class="muted">Open this URL in your browser, login and authorize.</span></div>'),ca=_('<p class="error-msg"> </p>'),da=_('<div class="bar" style="margin-top:8px"><span class="g">&#10003; account created</span> <br/><br/> email: <b> </b><br/> status: <b class="g"> </b><br/> <br/> <a>view account &rarr;</a></div>'),ua=_('<h2>add account</h2> <fieldset><legend>oauth flow</legend> <div style="margin:8px 0;padding:6px 0"><span style="font-weight:bold;margin-right:4px">1.</span> Generate authorization URL <br/> <button> </button> <!> <!></div> <div style="margin:8px 0;padding:6px 0"><span style="font-weight:bold;margin-right:4px">2.</span> Paste the callback URL or code <label for="callback-input">callback url or code</label> <input id="callback-input" type="text" placeholder="https://platform.claude.com/oauth/code/callback?code=..."/> <div class="hint">email and org info are auto-fetched after token exchange</div> <button> </button> <!> <!></div></fieldset> <p style="margin-top:16px;font-size:12px"><a>&larr; back</a></p>',1);function ya(J,M){Z(M,!0);let h=l(!1),x=l(!1),u=l(""),O=l(""),p=l(""),y=l(""),k=l(""),v=l(null);async function N(){i(h,!0),i(y,"");try{const a=await G("/accounts/generate-auth-url",{method:"POST"});i(u,a.session_id,!0),i(O,a.auth_url,!0)}catch(a){i(y,a.message,!0)}finally{i(h,!1)}}async function q(){if(t(p).trim()){i(x,!0),i(k,"");try{const a=await G("/accounts/exchange-code",{method:"POST",body:JSON.stringify({session_id:t(u),callback_url:t(p).trim()})});i(v,a,!0)}catch(a){i(k,a.message,!0)}finally{i(x,!1)}}}var L=ua(),S=e(aa(L),2),U=e(s(S),2),b=e(s(U),4),B=s(b,!0);o(b);var R=e(b,2);{var D=a=>{var r=na(),n=s(r,!0);o(r),m(()=>c(n,t(y))),f(a,r)};w(R,a=>{t(y)&&a(D)})}var F=e(R,2);{var H=a=>{var r=la(),n=e(s(r)),P=s(n,!0);o(n);var d=e(n,9),$=s(d,!0);o(d),ea(5),o(r),m(()=>{c(P,t(u)),j(d,"href",t(O)),c($,t(O))}),f(a,r)};w(F,a=>{t(u)&&a(H)})}o(U);var T=e(U,2),z=e(s(T),4);sa(z);var g=e(z,4),K=s(g,!0);o(g);var E=e(g,2);{var Q=a=>{var r=ca(),n=s(r,!0);o(r),m(()=>c(n,t(k))),f(a,r)};w(E,a=>{t(k)&&a(Q)})}var V=e(E,2);{var W=a=>{var r=da(),n=e(s(r),5),P=s(n,!0);o(n);var d=e(n,3),$=s(d,!0);o(d);var Y=e(d,5);o(r),m(()=>{c(P,t(v).email),c($,t(v).status),j(Y,"href",`${C??""}/accounts/${t(v).id??""}`)}),f(a,r)};w(V,a=>{t(v)&&a(W)})}o(T),o(S);var I=e(S,2),X=s(I);o(I),m(a=>{b.disabled=t(h),c(B,t(h)?"generating...":"generate auth url"),g.disabled=a,c(K,t(x)?"exchanging...":"exchange code"),j(X,"href",`${C??""}/dashboard`)},[()=>t(x)||!t(p).trim()||!t(u)]),A("click",b,N),oa(z,()=>t(p),a=>i(p,a)),A("click",g,q),f(J,L),ta()}ra(["click"]);export{ya as component,xa as universal};
