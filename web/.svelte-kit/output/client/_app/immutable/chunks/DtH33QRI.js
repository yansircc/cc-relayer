var u=Object.defineProperty;var l=(n,e,o)=>e in n?u(n,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):n[e]=o;var i=(n,e,o)=>l(n,typeof e!="symbol"?e+"":e,o);class a extends Error{constructor(o,r){super(r);i(this,"status");this.status=o}}async function w(n,e={}){const o=new AbortController,r=setTimeout(()=>o.abort(),15e3);try{const t=await fetch(`/admin${n}`,{credentials:"same-origin",signal:o.signal,headers:{"Content-Type":"application/json",...e.headers},...e});if(t.status===401)throw window.location.href="/ui/login",new a(401,"Unauthorized");if(!t.ok){const c=await t.text();throw new a(t.status,c||t.statusText)}const s=t.headers.get("content-type");return s!=null&&s.includes("application/json")?t.json():t.text()}catch(t){throw t instanceof DOMException&&t.name==="AbortError"?new a(0,"Request timeout"):t}finally{clearTimeout(r)}}export{w as a};
